# 安全漏洞知识图谱





### 开放域关系对抽取  
使用基于ltp工具包的事件三元组程序  
使用前请先安装ltp工具包  
终端运行 openExtraction/pyltp/setup.py  
'python3 openExtraction/pyltp/setup.py'  
使用Ltp模型，分词，词性识别，实体识别(人名地名机构)，依存句法分析等已训练模型  
识别方式 根据谓词，根据命名实体  
直接将三元组从句子中提出

效果：很多句子无法提取(结果为空)，提取三元组结果不理想

### 实体识别

### 限定域关系抽取

### 实体融合

### 将数据导入neo4j图数据库

首先下载neo4j社区版或购买企业版并安装  
方式1：python程序(使用py2neo)  
方式2：在neo4j图形界面使用cypher语句导入
首先将需要导入的csv文件放入neo4j程序路径的import文件夹

'''
全部删除 
MATCH (n) DETACH DELETE n  
 
导入作者 标题 结点和属性  
LOAD CSV WITH HEADERS  FROM "file:///Bug.csv" AS line  
CREATE (a:title{title:line.title,abstract:line.Abstract})  
CREATE (b:keywords{keywords:line.keywords})  
CREATE (c:author{author:line.Author,institute:line.Institute})  

添加索引  
CREATE CONSTRAINT ON (a:title)  
ASSERT a.title IS UNIQUE

导入关系  
LOAD CSV  WITH HEADERS FROM "file:///Bug.csv" AS line  
MATCH (from:title{title:line.title}),(to:author{author:line.Author})  
merge (from)-[r:author_of {}]->(to)  
return r

LOAD CSV  WITH HEADERS FROM "file:///Bug.csv" AS line  
MATCH (from:keywords{keywords:line.keywords}),(to:title{title:line.title})  
merge (from)-[r:keywords_of {}]->(to)  
return r  

除重/其实是合并结点  
MATCH (a:关键词)-[r:keywords_of]-(b:文献)  
WITH a, b, collect(r) as rels  
CALL apoc.refactor.mergeRelationships(rels,{properties:"combine"})  
YIELD rel   
RETURN count(rel)  
apoc是neo4j3.3版本推出时推荐的一个java存储过程包，里面包含丰富的函数和过程，作为对Cypher所不能提供的复杂图算法和数据操作功能的补充，APOC还具有使用灵活、高性能等优势。  
下载及安装方式  
[neo4j数据库中合并相同节点_lili安的博客-CSDN博客_there is no procedure with the name `apoc.refactor](https://blog.csdn.net/likeyou1314918273/article/details/105946179?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-4.nonecase&depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-4.nonecase)  

不同节点合并  
MATCH (a:e1),(b:e2),(c:`关键词`),(d.`文献`)  
where a.e1 = b.e2 = c.keywords = d.title  
call apoc.refactor.mergeNodes([a,b,c,d]) YIELD node  
RETURN node  

'''

'''
cypher基本查询语句  
与某结点有关的结点及关系 (:star{name=“王菲”})-->()  
函数  shortestpath() 最短路径  
'''


